<!--
Copyright (c) 2017 GreenWerx.org.
Licensed under CPAL 1.0,  See license.txt  or go to http://greenwerx.org/docs/license.txt  for full license details.
-->
<app-messageboxes></app-messageboxes>
<div *ngIf="!isValidCart">  <h3 id="emptyCartMessage">You have no products in your cart.</h3> </div>

<div *ngIf="isValidCart">
    <p-dataTable [value]="shoppingCart.CartItems" id="myDataTable">
        <p-header>
            <div class="cell-block" style="float:left;vertical-align:central;">
                <label>Location:</label>
            </div>
            <div class="cell-block" style="float:left;vertical-align:central;">

            </div>
            <h4 style="width:80%;">Items in cart</h4>
        </p-header>
        <p-column field="Image" header="Image" [editable]="false" [style]="{ 'text-align':'center', 'width': '10%'}">
            <ng-template let-product="rowData" pTemplate="body">
                <img src="{{product.Image}}" style="width:64px;height:64px;" (click)="editImage = !editImage" />
            </ng-template>
        </p-column>
        <p-column field="Name" header="Name" [editable]="false"></p-column>
        <p-column field="Weight" header="Weight" [editable]="false" [style]="{ 'text-align':'right', 'width': '10%'}">
            <ng-template let-product="rowData" pTemplate="body">
                {{product.Weight}} {{product.WeightUOM}}
            </ng-template>
        </p-column>
        <p-column field="Price" header="Price" [editable]="false" [style]="{ 'text-align':'right', 'width': '10%'}"></p-column>
        <p-column field="Quantity" header="Quantity" [editable]="true" [style]="{'text-align':'right', 'width': '10%'}"></p-column>
        <p-column field="TotalPrice" header="Total" [editable]="true" [style]="{'text-align':'right', 'width': '10%'}"></p-column>
        <p-column header="Action" [style]="{'overflow':'visible', 'width': '10%'}">
            <ng-template let-product="rowData" pTemplate="body">
                <button (click)="removeItemFromCart($event , product.CartItemUUID  )" id="{{product.UUID}}" type="button" style="display: block; margin: 0 auto;"><i class="fa fa-times" style="color:red;"></i></button>
            </ng-template>
        </p-column>


        <p-footer>
            <div class="row" style="margin-left:70%;">
                <table style="width:65%;">
                    <tr><td style="text-align:right;"><label>Quantity:</label> {{totalQuantity}}</td><td style="text-align:right;"><label>Subtotal:</label> {{subTotal}}</td></tr>
                </table>

            </div>
            <div class="row">
                <button [routerLink]="['/store/checkout']" bs-button="subtle-alt icon" title="Checkout" >Checkout
                    
                </button>
                    <!-- todo quick add
            <div class="cell-block" style="width:25%">
            <button type="button" class="form-control input-sm" value="Add"
                    [disabled]="selectedLocationUUID == ''"
                    (click)="showDialogToAdd('Product')" label="Add">
                <i class="fa fa-plus" style="color:blue;"></i> Add
            </button>
        </div>
        <div class="cell-block" style="width:25%">
            <button type="button" class="form-control input-sm" value="Check out"
                    (click)="payForItems()" label="Save">
                <i class="fa fa-money" style="color:green;"></i> Check out
            </button>
        </div>-->
</div>
        </p-footer>
    </p-dataTable>
</div>

